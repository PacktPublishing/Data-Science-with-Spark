{"paragraphs":[{"text":"import org.apache.spark.ml.{Pipeline, PipelineModel}\nimport org.apache.spark.ml.{Pipeline, PipelineModel}\nimport org.apache.spark.ml.classification.LogisticRegression\nimport org.apache.spark.ml.feature.Tokenizer\nimport org.apache.spark.ml.feature.StopWordsRemover\nimport org.apache.spark.ml.feature.HashingTF\nimport org.apache.spark.ml.linalg.Vector\nimport org.apache.spark.sql.Row\n\nval tokenizer = new Tokenizer()\n  .setInputCol(\"text\")\n  .setOutputCol(\"words\")\n  \nval remover = new StopWordsRemover()\n  .setInputCol(tokenizer.getOutputCol)\n  .setOutputCol(\"noStopWords\")\n\nval hashingTF = new HashingTF()\n  .setInputCol(remover.getOutputCol)\n  .setOutputCol(\"features\")\n\nval lr = new LogisticRegression()\n  .setMaxIter(10)\n\nval pipeline = new Pipeline()\n  .setStages(Array(tokenizer, remover, hashingTF, lr))","dateUpdated":"2016-12-16T09:25:22+0100","config":{"colWidth":12,"editorMode":"ace/mode/scala","graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591400_710931811","id":"20161215-172018_111494194","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.ml.{Pipeline, PipelineModel}\n\nimport org.apache.spark.ml.{Pipeline, PipelineModel}\n\nimport org.apache.spark.ml.classification.LogisticRegression\n\nimport org.apache.spark.ml.feature.Tokenizer\n\nimport org.apache.spark.ml.feature.StopWordsRemover\n\nimport org.apache.spark.ml.feature.HashingTF\n\nimport org.apache.spark.ml.linalg.Vector\n\nimport org.apache.spark.sql.Row\n\ntokenizer: org.apache.spark.ml.feature.Tokenizer = tok_6562047e14f3\n\nremover: org.apache.spark.ml.feature.StopWordsRemover = stopWords_a4f5cbda9fa6\n\nhashingTF: org.apache.spark.ml.feature.HashingTF = hashingTF_2c6d5ec65c09\n\nlr: org.apache.spark.ml.classification.LogisticRegression = logreg_6e1abb2b7e76\n\npipeline: org.apache.spark.ml.Pipeline = pipeline_6ef52845b041\n"},"dateCreated":"2016-12-16T09:23:11+0100","dateStarted":"2016-12-16T09:25:22+0100","dateFinished":"2016-12-16T09:25:22+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4911"},{"text":"import org.apache.spark.ml.tuning.ParamGridBuilder\n\nval paramGrid = new ParamGridBuilder()\n  .addGrid(lr.maxIter, Array(10, 20))\n  .addGrid(lr.threshold, Array(0.4, 0.6))\n  .addGrid(hashingTF.numFeatures, Array(100, 1000))\n  .build()\nparamGrid.size","dateUpdated":"2016-12-16T09:31:21+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591400_710931811","id":"20161215-172031_629567243","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.ml.tuning.ParamGridBuilder\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nparamGrid: Array[org.apache.spark.ml.param.ParamMap] =\nArray({\n\tlogreg_6e1abb2b7e76-maxIter: 10,\n\thashingTF_2c6d5ec65c09-numFeatures: 100,\n\tlogreg_6e1abb2b7e76-threshold: 0.4\n}, {\n\tlogreg_6e1abb2b7e76-maxIter: 10,\n\thashingTF_2c6d5ec65c09-numFeatures: 100,\n\tlogreg_6e1abb2b7e76-threshold: 0.6\n}, {\n\tlogreg_6e1abb2b7e76-maxIter: 20,\n\thashingTF_2c6d5ec65c09-numFeatures: 100,\n\tlogreg_6e1abb2b7e76-threshold: 0.4\n}, {\n\tlogreg_6e1abb2b7e76-maxIter: 20,\n\thashingTF_2c6d5ec65c09-numFeatures: 100,\n\tlogreg_6e1abb2b7e76-threshold: 0.6\n}, {\n\tlogreg_6e1abb2b7e76-maxIter: 10,\n\thashingTF_2c6d5ec65c09-numFeatures: 1000,\n\tlogreg_6e1abb2b7e76-threshold: 0.4\n}, {\n\tlogreg_6e1abb2b7e76-maxIter: 10,\n\thashingTF_2c6d5ec65c09-numFeatures: 1000,\n\tlogreg_6e1abb2b7e76-threshold: 0.6\n}, {\n\tlogreg_6e1abb2b7e76-maxIter: ...\nres32: Int = 8\n"},"dateCreated":"2016-12-16T09:23:11+0100","dateStarted":"2016-12-16T09:31:21+0100","dateFinished":"2016-12-16T09:31:21+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4912","focus":true},{"text":"val trainingDs = training.toDS\ntrainingDs.cache\ntrainingDs.persist","dateUpdated":"2016-12-16T09:31:24+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876739391_1839582580","id":"20161216-092539_1282428321","result":{"code":"SUCCESS","type":"TEXT","msg":"\ntrainingDs: org.apache.spark.sql.Dataset[SentimentText] = [id: int, label: double ... 2 more fields]\n\nres33: trainingDs.type = [id: int, label: double ... 2 more fields]\n\nres34: trainingDs.type = [id: int, label: double ... 2 more fields]\n"},"dateCreated":"2016-12-16T09:25:39+0100","dateStarted":"2016-12-16T09:31:24+0100","dateFinished":"2016-12-16T09:31:25+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4913","focus":true},{"text":"import org.apache.spark.ml.tuning.CrossValidator\nimport org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\ntraining.cache\n\nval crossValidator = new CrossValidator()\n  .setEstimator(pipeline)\n  .setEvaluator(new BinaryClassificationEvaluator)\n  .setEstimatorParamMaps(paramGrid)\n  .setNumFolds(4)\n\nval model = crossValidator.fit(trainingDs)","dateUpdated":"2016-12-16T09:31:26+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591401_710547062","id":"20161215-172041_1803428460","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.ml.tuning.CrossValidator\n\nimport org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\nres35: training.type = MapPartitionsRDD[5] at map at <console>:37\n\ncrossValidator: org.apache.spark.ml.tuning.CrossValidator = cv_2eb218e90179\n\nmodel: org.apache.spark.ml.tuning.CrossValidatorModel = cv_2eb218e90179\n"},"dateCreated":"2016-12-16T09:23:11+0100","dateStarted":"2016-12-16T09:31:26+0100","dateFinished":"2016-12-16T09:49:42+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4914","focus":true},{"text":"val fitted = model.transform(test.toDS)\nfitted.select(\"id\", \"label\", \"text\", \"probability\", \"prediction\")\n  .take(10)\n  .foreach {\n    case Row(id: Int, label: Double, text: String, prob: Vector, prediction: Double) =>\n       println(s\"($id, $text) --> prob=$prob, prediction=$prediction\")\n  }","dateUpdated":"2016-12-16T09:51:56+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591401_710547062","id":"20161215-172049_1608437459","result":{"code":"SUCCESS","type":"TEXT","msg":"\nfitted: org.apache.spark.sql.DataFrame = [id: int, label: double ... 8 more fields]\n(4, .. Omgaga. Im sooo  im gunna CRy. I've been at this dentist since 11.. I was suposed 2 just get a crown put on (30mins)...) --> prob=[0.8616122130450667,0.13838778695493326], prediction=0.0\n(10, hmmmm.... i wonder how she my number @-)) --> prob=[0.41963889603491017,0.5803611039650899], prediction=1.0\n(11, I must think about positive..) --> prob=[0.5928761613828514,0.40712383861714857], prediction=1.0\n(12, thanks to all the haters up in my face all day! 112-102) --> prob=[0.5150078698834533,0.48499213011654685], prediction=1.0\n(22, wompppp wompp) --> prob=[0.4432552836429252,0.5567447163570748], prediction=1.0\n(24, &lt;---Sad level is 3. I was writing a massive blog tweet on Myspace and my comp shut down. Now it's all lost *lays in fetal position*) --> prob=[0.5943426111570199,0.4056573888429801], prediction=1.0\n(40, what type of a spaz downloads a virus? my brother that's who :\\ MSN is now fucked forever    :'() --> prob=[0.7556546694356815,0.24434533056431854], prediction=0.0\n(42, (: !!!!!! - so i wrote something last week. and i got a call from someone in the new york office... http://tumblr.com/xcn21w6o7) --> prob=[0.5954469099230618,0.40455309007693824], prediction=1.0\n(43, *enough said*) --> prob=[0.39674667113572265,0.6032533288642773], prediction=1.0\n(48, - All Time Low shall be my motivation for the rest of the week.) --> prob=[0.38029637800835436,0.6197036219916456], prediction=1.0\n"},"dateCreated":"2016-12-16T09:23:11+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4915","dateFinished":"2016-12-16T09:51:56+0100","dateStarted":"2016-12-16T09:51:56+0100","focus":true},{"text":"import org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\nval evaluator = new BinaryClassificationEvaluator\nval pl = fitted.select(\"prediction\", \"label\").toDF(\"rawPrediction\", \"label\")\n\nevaluator.setMetricName(\"areaUnderROC\")\nprintln(s\"areaUnderROC: ${evaluator.evaluate(pl)}\")\n\nevaluator.setMetricName(\"areaUnderPR\")\nprintln(s\"areaUnderPR: ${evaluator.evaluate(pl)}\")","dateUpdated":"2016-12-16T09:51:58+0100","config":{"colWidth":12,"editorMode":"ace/mode/scala","graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591401_710547062","id":"20161215-172100_155262851","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\nevaluator: org.apache.spark.ml.evaluation.BinaryClassificationEvaluator = binEval_f74c64964573\n\npl: org.apache.spark.sql.DataFrame = [rawPrediction: double, label: double]\n\nres37: evaluator.type = binEval_f74c64964573\nareaUnderROC: 0.6416416550482315\n\nres39: evaluator.type = binEval_f74c64964573\nareaUnderPR: 0.7624989220039716\n"},"dateCreated":"2016-12-16T09:23:11+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4916","dateFinished":"2016-12-16T09:52:01+0100","dateStarted":"2016-12-16T09:51:58+0100","focus":true},{"text":"import org.apache.spark.mllib.util.MLUtils\nimport org.apache.spark.ml.evaluation.RegressionEvaluator\nimport org.apache.spark.ml.tuning.ParamGridBuilder\n\nval lr = new LogisticRegression()\n  .setMaxIter(10)\n\nval paramGrid = new ParamGridBuilder()\n  .addGrid(lr.regParam, Array(0.1, 0.01))\n  .addGrid(lr.fitIntercept)\n  .addGrid(lr.elasticNetParam, Array(0.0, 0.5, 1.0))\n  .build()\nparamGrid.size","dateUpdated":"2016-12-16T10:28:08+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591402_711701308","id":"20161215-172111_2045177593","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.mllib.util.MLUtils\n\nimport org.apache.spark.ml.evaluation.RegressionEvaluator\n\nimport org.apache.spark.ml.tuning.ParamGridBuilder\n\nlr: org.apache.spark.ml.classification.LogisticRegression = logreg_19adb3b20da1\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nparamGrid: Array[org.apache.spark.ml.param.ParamMap] =\nArray({\n\tlogreg_19adb3b20da1-elasticNetParam: 0.0,\n\tlogreg_19adb3b20da1-fitIntercept: true,\n\tlogreg_19adb3b20da1-regParam: 0.1\n}, {\n\tlogreg_19adb3b20da1-elasticNetParam: 0.5,\n\tlogreg_19adb3b20da1-fitIntercept: true,\n\tlogreg_19adb3b20da1-regParam: 0.1\n}, {\n\tlogreg_19adb3b20da1-elasticNetParam: 1.0,\n\tlogreg_19adb3b20da1-fitIntercept: true,\n\tlogreg_19adb3b20da1-regParam: 0.1\n}, {\n\tlogreg_19adb3b20da1-elasticNetParam: 0.0,\n\tlogreg_19adb3b20da1-fitIntercept: false,\n\tlogreg_19adb3b20da1-regParam: 0.1\n}, {\n\tlogreg_19adb3b20da1-elasticNetParam: 0.5,\n\tlogreg_19adb3b20da1-fitIntercept: false,\n\tlogreg_19adb3b20da1-regParam: 0.1\n}, {\n\tlogreg_19adb3b20da1-elasticNetParam: 1.0,\n\tlogreg_19adb3b20da1-fitIntercept: false,\n\tlogreg_19adb3b20da1-regPar...\nres45: Int = 12\n"},"dateCreated":"2016-12-16T09:23:11+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4917","dateFinished":"2016-12-16T10:28:08+0100","dateStarted":"2016-12-16T10:28:08+0100","focus":true},{"text":"import org.apache.spark.ml.tuning.TrainValidationSplit\n\nval trainValidationSplit = new TrainValidationSplit()\n  .setEstimator(lr)\n  .setEvaluator(new RegressionEvaluator)\n  .setEstimatorParamMaps(paramGrid)\n  .setTrainRatio(0.1)","dateUpdated":"2016-12-16T10:29:47+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/text"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591402_711701308","id":"20161215-172119_507269644","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.ml.tuning.TrainValidationSplit\n\ntrainValidationSplit: org.apache.spark.ml.tuning.TrainValidationSplit = tvs_70b9f7268736\n"},"dateCreated":"2016-12-16T09:23:11+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4918","dateFinished":"2016-12-16T10:29:47+0100","dateStarted":"2016-12-16T10:29:47+0100","focus":true},{"text":"import org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\nval evaluator = new BinaryClassificationEvaluator\nval pl = fitted.select(\"prediction\", \"label\").toDF(\"rawPrediction\", \"label\")\n\nevaluator.setMetricName(\"areaUnderROC\")\nprintln(s\"areaUnderROC: ${evaluator.evaluate(pl)}\")\n\nevaluator.setMetricName(\"areaUnderPR\")\nprintln(s\"areaUnderPR: ${evaluator.evaluate(pl)}\")","dateUpdated":"2016-12-16T10:27:25+0100","config":{"colWidth":12,"editorMode":"ace/mode/scala","graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591402_711701308","id":"20161215-172128_121235443","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\nevaluator: org.apache.spark.ml.evaluation.BinaryClassificationEvaluator = binEval_c3ac41204ff3\n\npl: org.apache.spark.sql.DataFrame = [rawPrediction: double, label: double]\n\nres41: evaluator.type = binEval_c3ac41204ff3\nareaUnderROC: 0.6416416550482315\n\nres43: evaluator.type = binEval_c3ac41204ff3\nareaUnderPR: 0.7624989220039716\n"},"dateCreated":"2016-12-16T09:23:11+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4919","dateFinished":"2016-12-16T10:27:30+0100","dateStarted":"2016-12-16T10:27:26+0100","focus":true},{"text":"","dateUpdated":"2016-12-16T09:23:11+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481876591403_711316560","id":"20161215-172140_798700611","dateCreated":"2016-12-16T09:23:11+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4920"}],"name":"08.4","id":"2C53QYZ3Z","angularObjects":{"2BXV59BJ5:shared_process":[],"2BZ7JWBYX:shared_process":[],"2BYKQAFE3:shared_process":[],"2BXX92DZZ:shared_process":[],"2BY8191PX:shared_process":[],"2C242HAW7:shared_process":[],"2BXRBYBNN:shared_process":[],"2C1F64B57:shared_process":[],"2BXESURSJ:shared_process":[],"2BZSUGKDS:shared_process":[],"2C26Y211G:shared_process":[],"2C1URPXW3:shared_process":[],"2BZN774H8:shared_process":[]},"config":{"looknfeel":"default"},"info":{}}