{"paragraphs":[{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790083507_-1997470003","id":"20161215-092123_1349652115","dateCreated":"2016-12-15T09:21:23+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3033","text":"import org.apache.spark.mllib.util.MLUtils\n\nval predictions = model.transform(MLUtils.convertVectorColumnsToML(mltest))\npredictions.show","dateUpdated":"2016-12-15T09:23:15+0100","dateFinished":"2016-12-15T09:23:16+0100","dateStarted":"2016-12-15T09:23:15+0100","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.mllib.util.MLUtils\n\npredictions: org.apache.spark.sql.DataFrame = [id: int, label: double ... 8 more fields]\n+---+-----+---------+--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------+\n| id|label|sentiment|                text|               words|         noStopWords|            features|       rawPrediction|         probability|prediction|\n+---+-----+---------+--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------+\n|  4|  0.0| NEGATIVE|.. Omgaga. Im soo...|[.., omgaga., im,...|[.., omgaga., im,...|(100,[2,10,13,18,...|[1.43575276088067...|[0.80779608034143...|       0.0|\n| 10|  1.0| POSITIVE|hmmmm.... i wonde...|[hmmmm...., i, wo...|[hmmmm...., wonde...|(100,[55,60,83,98...|[-0.3332330015006...|[0.41745419265169...|       1.0|\n| 11|  0.0| NEGATIVE|I must think abou...|[i, must, think, ...|[must, think, pos...|(100,[23,64,80],[...|[-0.1306959247451...|[0.46737244935125...|       1.0|\n| 12|  1.0| POSITIVE|thanks to all the...|[thanks, to, all,...|[thanks, haters, ...|(100,[27,30,34,38...|[0.07220744426644...|[0.51804402174816...|       0.0|\n| 22|  0.0| NEGATIVE|       wompppp wompp|    [wompppp, wompp]|    [wompppp, wompp]|(100,[58,59],[1.0...|[-0.2675701137527...|[0.43350372553970...|       1.0|\n| 24|  0.0| NEGATIVE|&lt;---Sad level ...|[&lt;---sad, leve...|[&lt;---sad, leve...|(100,[3,17,30,33,...|[0.48369917342540...|[0.61862099940387...|       0.0|\n| 40|  0.0| NEGATIVE|what type of a sp...|[what, type, of, ...|[type, spaz, down...|(100,[7,22,26,36,...|[0.47881763563917...|[0.61746863779995...|       0.0|\n| 42|  1.0| POSITIVE|(: !!!!!! - so i ...|[(:, !!!!!!, -, s...|[(:, !!!!!!, -, w...|(100,[7,11,12,25,...|[0.26124336665885...|[0.56494191426686...|       0.0|\n| 43|  0.0| NEGATIVE|       *enough said*|    [*enough, said*]|    [*enough, said*]|(100,[49,55],[1.0...|[-0.2844100208736...|[0.42937293393635...|       1.0|\n| 48|  0.0| NEGATIVE|- All Time Low sh...|[-, all, time, lo...|[-, time, low, sh...|(100,[8,12,18,57,...|[-0.4648745182988...|[0.38583009159751...|       1.0|\n| 60|  0.0| NEGATIVE|Hand quilting it ...|[hand, quilting, ...|[hand, quilting, ...|(100,[23,40,57],[...|[-0.6785608124397...|[0.33658259000378...|       1.0|\n| 67|  0.0| NEGATIVE|         I miss Earl|     [i, miss, earl]|        [miss, earl]|(100,[0,71],[1.0,...|[0.29674406737830...|[0.57364638475696...|       0.0|\n| 80|  0.0| NEGATIVE|i was too slow to...|[i, was, too, slo...|[slow, get, $1, tix]|(100,[3,42,59,99]...|[-0.2401401268550...|[0.44025181896116...|       1.0|\n| 82|  0.0| NEGATIVE|I wish I could go...|[i, wish, i, coul...|[wish, could, go,...|(100,[4,13,15,52,...|[0.60504338673635...|[0.64680930419210...|       0.0|\n| 86|  1.0| POSITIVE|I'm really going ...|[i'm, really, goi...|[i'm, really, goi...|(100,[10,54,74,88...|[-0.0229215733439...|[0.49426985754583...|       1.0|\n| 88|  0.0| NEGATIVE|in cab headed to ...|[in, cab, headed,...|[cab, headed, air...|(100,[32,69,72,87...|[-0.0234064133767...|[0.49414866379623...|       1.0|\n| 91|  0.0| NEGATIVE|jonas day is almo...|[jonas, day, is, ...|[jonas, day, almo...|(100,[5,19,43,97]...|[-0.3677984574650...|[0.40907309877892...|       1.0|\n|102|  0.0| NEGATIVE|   not a cool night.|[not, a, cool, ni...|      [cool, night.]|(100,[34,95],[1.0...|[-0.0556266221443...|[0.48609692932610...|       1.0|\n|106|  0.0| NEGATIVE|really wanted Saf...|[really, wanted, ...|[really, wanted, ...|(100,[10,16,22,30...|[-0.3023127608794...|[0.42499220714265...|       1.0|\n|108|  1.0| POSITIVE|Rose and ood will...|[rose, and, ood, ...|[rose, ood, back,...|(100,[18,30,40,44...|[-0.5937279600612...|[0.35577994506421...|       1.0|\n+---+-----+---------+--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------+\nonly showing top 20 rows\n\n"}},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790195748_-1898068513","id":"20161215-092315_1433710440","dateCreated":"2016-12-15T09:23:15+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3105","dateUpdated":"2016-12-15T09:23:23+0100","dateFinished":"2016-12-15T09:23:23+0100","dateStarted":"2016-12-15T09:23:23+0100","result":{"code":"SUCCESS","type":"TEXT","msg":"\npredictions: org.apache.spark.sql.DataFrame = [id: int, label: double ... 8 more fields]\n"},"text":"val predictions = model.transform(MLUtils.convertVectorColumnsToML(mltest))"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790203190_-1831491630","id":"20161215-092323_1655626804","dateCreated":"2016-12-15T09:23:23+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3180","dateUpdated":"2016-12-15T09:23:27+0100","dateFinished":"2016-12-15T09:23:28+0100","dateStarted":"2016-12-15T09:23:27+0100","result":{"code":"SUCCESS","type":"TEXT","msg":"\npredictionsAndLabels: org.apache.spark.sql.Dataset[(Double, Double)] = [_1: double, _2: double]\n"},"text":"val predictionsAndLabels = predictions.map { r =>\n  (r.getAs[Double](\"prediction\"), r.getAs[Double](\"label\"))\n}"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790207909_-410613941","id":"20161215-092327_684496939","dateCreated":"2016-12-15T09:23:27+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3257","dateUpdated":"2016-12-15T09:23:32+0100","dateFinished":"2016-12-15T09:23:46+0100","dateStarted":"2016-12-15T09:23:32+0100","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\nevaluator: org.apache.spark.ml.evaluation.BinaryClassificationEvaluator = binEval_48a3e930df26\n\npl: org.apache.spark.sql.DataFrame = [rawPrediction: double, label: double]\n\nres11: evaluator.type = binEval_48a3e930df26\nareaUnderROC: 0.5791531491383348\n\nres13: evaluator.type = binEval_48a3e930df26\nareaUnderPR: 0.6904952094487697\n"},"text":"import org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\nval evaluator = new BinaryClassificationEvaluator\n\nval pl = predictionsAndLabels.toDF(\"rawPrediction\", \"label\")\n\nevaluator.setMetricName(\"areaUnderROC\")\nprintln(s\"areaUnderROC: ${evaluator.evaluate(pl)}\")\n\nevaluator.setMetricName(\"areaUnderPR\")\nprintln(s\"areaUnderPR: ${evaluator.evaluate(pl)}\")"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790212444_477401844","id":"20161215-092332_727591496","dateCreated":"2016-12-15T09:23:32+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3331","dateUpdated":"2016-12-15T09:23:42+0100","dateFinished":"2016-12-15T09:23:57+0100","dateStarted":"2016-12-15T09:23:42+0100","result":{"code":"SUCCESS","type":"TEXT","msg":"\nimport org.apache.spark.mllib.evaluation.BinaryClassificationMetrics\n\nmetrics: org.apache.spark.mllib.evaluation.BinaryClassificationMetrics = org.apache.spark.mllib.evaluation.BinaryClassificationMetrics@3a8c2008\n\nroc: org.apache.spark.sql.DataFrame = [_1: double, _2: double]\n\nprecision: Array[(Double, Double)] = Array((1.0,0.5749257144218229), (0.0,0.5006168512991935))\nThreshold: 1.0, Precision: 0.5749257144218229\nThreshold: 0.0, Precision: 0.5006168512991935\n\nrecall: Array[(Double, Double)] = Array((1.0,0.6116503009185936), (0.0,1.0))\nThreshold: 1.0, Recall: 0.6116503009185936\nThreshold: 0.0, Recall: 1.0\n\nPRC: org.apache.spark.rdd.RDD[(Double, Double)] = UnionRDD[118] at union at BinaryClassificationMetrics.scala:108\n\nf1Score: Array[(Double, Double)] = Array((1.0,0.5927196937838991), (0.0,0.6672147535405497))\nThreshold: 1.0, F-score: 0.5927196937838991, Beta = 1\nThreshold: 0.0, F-score: 0.6672147535405497, Beta = 1\n\nbeta: Double = 0.5\n\nfScore: org.apache.spark.rdd.RDD[(Double, Double)] = MapPartitionsRDD[120] at map at BinaryClassificationMetrics.scala:212\nThreshold: 1.0, F-score: 0.5927196937838991, Beta = 0.5\nThreshold: 0.0, F-score: 0.6672147535405497, Beta = 0.5\n"},"text":"import org.apache.spark.mllib.evaluation.BinaryClassificationMetrics\n\n// Instantiate metrics object.\nval metrics = new BinaryClassificationMetrics(predictionsAndLabels.rdd)\n\n// ROC Curve.\nval roc = metrics.roc.toDF\nroc.createOrReplaceTempView(\"roc\")\n\n// Precision by threshold.\nval precision = metrics.precisionByThreshold.collect\nprecision.foreach { case (t, p) =>\n  println(s\"Threshold: $t, Precision: $p\")\n}\n\n// Recall by threshold.\nval recall = metrics.recallByThreshold.collect\nrecall.foreach { case (t, r) =>\n  println(s\"Threshold: $t, Recall: $r\")\n}\n\n// Precision-Recall Curve.\nval PRC = metrics.pr\n\n// F-measure.\nval f1Score = metrics.fMeasureByThreshold.collect\nf1Score.foreach { case (t, f) =>\n  println(s\"Threshold: $t, F-score: $f, Beta = 1\")\n}\n\nval beta = 0.5\nval fScore = metrics.fMeasureByThreshold(beta)\nf1Score.foreach {\n  case (t, f) => println(s\"Threshold: $t, F-score: $f, Beta = 0.5\")\n}"},{"config":{"colWidth":12,"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"_1","index":0,"aggr":"sum"}],"values":[{"name":"_2","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"_1","index":0,"aggr":"sum"},"yAxis":{"name":"_2","index":1,"aggr":"sum"}}},"enabled":true,"helium":{}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790222190_1011833391","id":"20161215-092342_193297944","dateCreated":"2016-12-15T09:23:42+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3407","dateUpdated":"2016-12-15T09:24:07+0100","dateFinished":"2016-12-15T09:23:57+0100","dateStarted":"2016-12-15T09:23:51+0100","result":{"code":"SUCCESS","type":"TABLE","msg":"_1\t_2\n0.0\t0.0\n0.45334400264192404\t0.6116503009185936\n1.0\t1.0\n1.0\t1.0\n","comment":"","msgTable":[[{"key":"_2","value":0},{"key":"_2","value":0}],[{"value":0.45334400264192404},{"value":0.6116503009185936}],[{"value":1},{"value":1}],[{"value":1},{"value":1}]],"columnNames":[{"name":"_1","index":0,"aggr":"sum"},{"name":"_2","index":1,"aggr":"sum"}],"rows":[[0,0],[0.45334400264192404,0.6116503009185936],[1,1],[1,1]]},"text":"%sql select * from roc order by _1"},{"text":"// AUPRC.\nval auPRC = metrics.areaUnderPR\nprintln(\"Area under precision-recall curve = \" + auPRC)\n\n// AUROC\nval auROC = metrics.areaUnderROC\nprintln(\"Area under ROC = \" + auROC)\n\n// Compute thresholds used in ROC and PR curves\nval thresholds = precision.map(_._1).foreach(println)","dateUpdated":"2016-12-15T09:24:17+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790232444_-1346677367","id":"20161215-092352_1388911765","dateCreated":"2016-12-15T09:23:52+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3549","dateFinished":"2016-12-15T09:24:17+0100","dateStarted":"2016-12-15T09:24:17+0100","result":{"code":"SUCCESS","type":"TEXT","msg":"\nauPRC: Double = 0.6904952094487697\nArea under precision-recall curve = 0.6904952094487697\n\nauROC: Double = 0.5791531491383348\nArea under ROC = 0.5791531491383348\n1.0\n0.0\n\nthresholds: Unit = ()\n"}},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481790257451_-812999994","id":"20161215-092417_1084389586","dateCreated":"2016-12-15T09:24:17+0100","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3708","dateUpdated":"2016-12-15T09:24:27+0100","text":""}],"name":"08.3","id":"2C3CDCV4F","angularObjects":{"2BXV59BJ5:shared_process":[],"2BZ7JWBYX:shared_process":[],"2BYKQAFE3:shared_process":[],"2BXX92DZZ:shared_process":[],"2BY8191PX:shared_process":[],"2C242HAW7:shared_process":[],"2BXRBYBNN:shared_process":[],"2C1F64B57:shared_process":[],"2BXESURSJ:shared_process":[],"2BZSUGKDS:shared_process":[],"2C26Y211G:shared_process":[],"2C1URPXW3:shared_process":[],"2BZN774H8:shared_process":[]},"config":{"looknfeel":"default"},"info":{}}