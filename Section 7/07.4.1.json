{"paragraphs":[{"text":"","dateUpdated":"2016-12-17T10:47:40+0100","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481968060560_-70936845","id":"20161217-104509_1733663561","dateCreated":"2016-12-17T10:47:40+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2486"},{"text":"val tweets = spark.read.parquet(\"/dataset/twitter/reference\")\ntweets.toDF.createOrReplaceTempView(\"tweets\");\ntweets.filter(t => t.getAs[Boolean](\"retweeted\") == true).toDF.createOrReplaceTempView(\"retweeted\");\n\nval tables = spark.sql(\"show tables\").collect.map(s => s(0))\nz.angularBind(\"tables\", tables)\nz.angularBind(\"selectedTable\", \"tweets\")\n\nval selectedTableContext = z.getInterpreterContext()\nz.angularUnwatch(\"selectedTable\")\nz.angularWatch(\"selectedTable\", (before: Object, after: Object) => {\n    z.run(2, selectedTableContext)\n    z.run(3, selectedTableContext)\n    z.run(4, selectedTableContext)\n})","dateUpdated":"2016-12-17T10:47:40+0100","config":{"tableHide":true,"colWidth":12,"editorMode":"ace/mode/scala","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{},"map":{"baseMapType":"Streets","isOnline":true,"pinCols":[]}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481968060565_-72860590","id":"20150422-205432_208470446","result":{"code":"SUCCESS","type":"TEXT","msg":"\ntweets: org.apache.spark.sql.DataFrame = [accessLevel: bigint, contributors: array<string> ... 33 more fields]\n\ntables: Array[Any] = Array(retweeted, tweets)\n\nselectedTableContext: org.apache.zeppelin.interpreter.InterpreterContext = org.apache.zeppelin.interpreter.InterpreterContext@6bc2316c\n"},"dateCreated":"2016-12-17T10:47:40+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2487"},{"text":"%angular \nPlease select table <select ng-model=\"selectedTable\" ng-options=\"t as t for t in tables\"></select>","dateUpdated":"2016-12-17T10:47:40+0100","config":{"tableHide":false,"colWidth":12,"editorMode":"ace/mode/scala","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{},"map":{"baseMapType":"Streets","isOnline":true,"pinCols":[]}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481968060567_-72091092","id":"20150423-122620_463312609","result":{"code":"SUCCESS","type":"ANGULAR","msg":"Please select table <select ng-model=\"selectedTable\" ng-options=\"t as t for t in tables\"></select>"},"dateCreated":"2016-12-17T10:47:40+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2488"},{"text":"\n\nval stat = spark.sql(\"select count(*) as cnt, (count(distinct lang)) as langs, cast(avg(retweetCount) as INT) as avgRetweetCounts, max(retweetCount) as maxRetweetCounts from \" + z.angular(\"selectedTable\")).collect\n\nval count = stat(0)(0)\nval langs = stat(0)(1)\nval avgRetweetCounts = stat(0)(2)\nval maxRetweetCounts = stat(0)(3)\n\nprint(s\"\"\"%angular\n\n<h2>Table {{selectedTable}}</h2>\n<hr />\n<div class=\"row\">\n    <div class=\"col-md-6\"><center><h3>$count</h3>Total Tweets</center></div>\n    <div class=\"col-md-6\"><center><h3>$langs</h3>Languages</center></div>\n</div>\n<br />\n<div>\n    <div class=\"col-md-6\"><center><h3>$avgRetweetCounts</h3>Average Retweet Counts</center></div>\n    <div class=\"col-md-6\"><center><h3>$maxRetweetCounts</h3>Maximum Retweet Counts</center></div>\n</div>\n<br /><br /><br /><br /><br /><br /><br />\n\n\"\"\")","dateUpdated":"2016-12-17T10:47:40+0100","config":{"tableHide":false,"colWidth":6,"editorMode":"ace/mode/scala","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{},"map":{"baseMapType":"Streets","isOnline":true,"pinCols":[]}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481968060569_-74399586","id":"20150423-122918_1139304056","result":{"code":"SUCCESS","type":"ANGULAR","msg":"\n<h2>Table {{selectedTable}}</h2>\n<hr />\n<div class=\"row\">\n    <div class=\"col-md-6\"><center><h3>4437</h3>Total Tweets</center></div>\n    <div class=\"col-md-6\"><center><h3>1</h3>Languages</center></div>\n</div>\n<br />\n<div>\n    <div class=\"col-md-6\"><center><h3>0</h3>Average Retweet Counts</center></div>\n    <div class=\"col-md-6\"><center><h3>0</h3>Maximum Retweet Counts</center></div>\n</div>\n<br /><br /><br /><br /><br /><br /><br />\n\n"},"dateCreated":"2016-12-17T10:47:40+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2489"},{"text":"z.show(spark.sql(\"select place.country, count(1) as cnt from \"\n  + z.angular(\"selectedTable\") \n  + \" where place.country is not null\"\n  + \" group by place.country order by cnt desc limit 5\"))","dateUpdated":"2016-12-17T10:47:40+0100","config":{"tableHide":false,"colWidth":6,"editorMode":"ace/mode/scala","editorHide":true,"graph":{"mode":"pieChart","height":300,"optionOpen":false,"keys":[{"name":"country","index":0,"aggr":"sum"}],"values":[{"name":"cnt","index":1,"aggr":"sum"}],"groups":[],"scatter":{"yAxis":{"name":"cnt","index":1,"aggr":"sum"}},"map":{"baseMapType":"Streets","isOnline":true,"pinCols":[]}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481968060570_-73245339","id":"20150423-122932_1205336797","result":{"code":"SUCCESS","type":"TABLE","msg":"country\tcnt\nUnited States\t51\nIndia\t6\nIndonesia\t4\nNigeria\t3\nIsle of Man\t3\n","comment":"","msgTable":[[{"key":"cnt","value":"United States"},{"key":"cnt","value":51}],[{"value":"India"},{"value":6}],[{"value":"Indonesia"},{"value":4}],[{"value":"Nigeria"},{"value":3}],[{"value":"Isle of Man"},{"value":3}]],"columnNames":[{"name":"country","index":0,"aggr":"sum"},{"name":"cnt","index":1,"aggr":"sum"}],"rows":[["United States",51],["India",6],["Indonesia",4],["Nigeria",3],["Isle of Man",3]]},"dateCreated":"2016-12-17T10:47:40+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2490"},{"text":"z.show(spark.sql(\"select user.screenName, lang, place.country from \" + z.angular(\"selectedTable\") + \" where place.country is not null\"))","dateUpdated":"2016-12-17T10:47:40+0100","config":{"tableHide":false,"colWidth":12,"editorMode":"ace/mode/scala","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"screenName","index":0,"aggr":"sum"}],"values":[{"name":"lang","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"screenName","index":0,"aggr":"sum"},"yAxis":{"name":"lang","index":1,"aggr":"sum"}},"map":{"baseMapType":"Streets","isOnline":true,"pinCols":[]}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481968060571_-73630088","id":"20150423-122955_47541315","result":{"code":"SUCCESS","type":"TABLE","msg":"screenName\tlang\tcountry\nsonuyadavsy172\ten\tIndia\nsonuyadavsy172\ten\tIndia\nPabloFlexx\ten\tUnited States\nPabloFlexx\ten\tUnited States\nAjPuente_12\ten\tUnited States\nPabloFlexx\ten\tUnited States\nAjPuente_12\ten\tUnited States\nAndiCartwright\ten\tUnited Kingdom\nAndiCartwright\ten\tUnited Kingdom\nFarebiAankhein\ten\tIndia\nFarebiAankhein\ten\tIndia\nBangBangClub23\ten\tUnited States\nFarebiAankhein\ten\tIndia\nBangBangClub23\ten\tUnited States\nBusinessCork\ten\tIreland\nBusinessCork\ten\tIreland\nBusinessCork\ten\tIreland\nAbidalHot\ten\tNigeria\nalex9876smith1\ten\tUnited States\nalex9876smith1\ten\tUnited States\nBobbyAlonso316\ten\tUnited States\nBobbyAlonso316\ten\tUnited States\nmaliaikang\ten\tIndonesia\njoshuabrand1\ten\tIsle of Man\n_MADEINGEORGIA_\ten\tUnited States\n_MADEINGEORGIA_\ten\tUnited States\nMaryPat822\ten\tUnited States\nMaryPat822\ten\tUnited States\nMaryPat822\ten\tUnited States\nmissgrandma_36\ten\tHong Kong\nmissgrandma_36\ten\tHong Kong\nmissgrandma_36\ten\tHong Kong\njoshuabrand1\ten\tIsle of Man\njoshuabrand1\ten\tIsle of Man\ngilbert_3998\ten\tUnited States\nAjPuente_12\ten\tUnited States\nMannyDaGemini\ten\tUnited States\nMannyDaGemini\ten\tUnited States\nMannyDaGemini\ten\tUnited States\nRosiePocketon\ten\tGreece\nRosiePocketon\ten\tGreece\nRosiePocketon\ten\tGreece\nAndiCartwright\ten\tUnited Kingdom\nglitteringlatte\ten\tUnited States\nglitteringlatte\ten\tUnited States\njorgefsb\ten\tUnited States\nglitteringlatte\ten\tUnited States\njorgefsb\ten\tUnited States\njorgefsb\ten\tUnited States\nsonuyadavsy172\ten\tIndia\nmomoneyxox\ten\tUnited States\nMiguelGonzalez\ten\tEspaña\nmomoneyxox\ten\tUnited States\nMiguelGonzalez\ten\tEspaña\nMatthewprince_\ten\tUnited States\nmomoneyxox\ten\tUnited States\nMiguelGonzalez\ten\tEspaña\nMatthewprince_\ten\tUnited States\nMatthewprince_\ten\tUnited States\n_MADEINGEORGIA_\ten\tUnited States\ngcje24\ten\tÖsterreich\ngcje24\ten\tÖsterreich\ngcje24\ten\tÖsterreich\nOuterRimToys\ten\tUnited States\nOuterRimToys\ten\tUnited States\nfvmbo\ten\tUnited States\nfvmbo\ten\tUnited States\nfvmbo\ten\tUnited States\nalex9876smith1\ten\tUnited States\ngilbert_3998\ten\tUnited States\ntheten_110TN\ten\tIndonesia\ngilbert_3998\ten\tUnited States\ntheten_110TN\ten\tIndonesia\nmitchell_lierz\ten\tUnited States\nLstands4lovely\ten\tUnited States\ntheten_110TN\ten\tIndonesia\nmitchell_lierz\ten\tUnited States\nLstands4lovely\ten\tUnited States\nmitchell_lierz\ten\tUnited States\nLstands4lovely\ten\tUnited States\nHoodRich_DB\ten\tUnited States\nHoodRich_DB\ten\tUnited States\nAbidalHot\ten\tNigeria\nHoodRich_DB\ten\tUnited States\nAbidalHot\ten\tNigeria\n","comment":"","msgTable":[[{"key":"lang","value":"sonuyadavsy172"},{"key":"lang","value":"en"},{"key":"lang","value":"India"}],[{"key":"country","value":"sonuyadavsy172"},{"key":"country","value":"en"},{"key":"country","value":"India"}],[{"value":"PabloFlexx"},{"value":"en"},{"value":"United States"}],[{"value":"PabloFlexx"},{"value":"en"},{"value":"United States"}],[{"value":"AjPuente_12"},{"value":"en"},{"value":"United States"}],[{"value":"PabloFlexx"},{"value":"en"},{"value":"United States"}],[{"value":"AjPuente_12"},{"value":"en"},{"value":"United States"}],[{"value":"AndiCartwright"},{"value":"en"},{"value":"United Kingdom"}],[{"value":"AndiCartwright"},{"value":"en"},{"value":"United Kingdom"}],[{"value":"FarebiAankhein"},{"value":"en"},{"value":"India"}],[{"value":"FarebiAankhein"},{"value":"en"},{"value":"India"}],[{"value":"BangBangClub23"},{"value":"en"},{"value":"United States"}],[{"value":"FarebiAankhein"},{"value":"en"},{"value":"India"}],[{"value":"BangBangClub23"},{"value":"en"},{"value":"United States"}],[{"value":"BusinessCork"},{"value":"en"},{"value":"Ireland"}],[{"value":"BusinessCork"},{"value":"en"},{"value":"Ireland"}],[{"value":"BusinessCork"},{"value":"en"},{"value":"Ireland"}],[{"value":"AbidalHot"},{"value":"en"},{"value":"Nigeria"}],[{"value":"alex9876smith1"},{"value":"en"},{"value":"United States"}],[{"value":"alex9876smith1"},{"value":"en"},{"value":"United States"}],[{"value":"BobbyAlonso316"},{"value":"en"},{"value":"United States"}],[{"value":"BobbyAlonso316"},{"value":"en"},{"value":"United States"}],[{"value":"maliaikang"},{"value":"en"},{"value":"Indonesia"}],[{"value":"joshuabrand1"},{"value":"en"},{"value":"Isle of Man"}],[{"value":"_MADEINGEORGIA_"},{"value":"en"},{"value":"United States"}],[{"value":"_MADEINGEORGIA_"},{"value":"en"},{"value":"United States"}],[{"value":"MaryPat822"},{"value":"en"},{"value":"United States"}],[{"value":"MaryPat822"},{"value":"en"},{"value":"United States"}],[{"value":"MaryPat822"},{"value":"en"},{"value":"United States"}],[{"value":"missgrandma_36"},{"value":"en"},{"value":"Hong Kong"}],[{"value":"missgrandma_36"},{"value":"en"},{"value":"Hong Kong"}],[{"value":"missgrandma_36"},{"value":"en"},{"value":"Hong Kong"}],[{"value":"joshuabrand1"},{"value":"en"},{"value":"Isle of Man"}],[{"value":"joshuabrand1"},{"value":"en"},{"value":"Isle of Man"}],[{"value":"gilbert_3998"},{"value":"en"},{"value":"United States"}],[{"value":"AjPuente_12"},{"value":"en"},{"value":"United States"}],[{"value":"MannyDaGemini"},{"value":"en"},{"value":"United States"}],[{"value":"MannyDaGemini"},{"value":"en"},{"value":"United States"}],[{"value":"MannyDaGemini"},{"value":"en"},{"value":"United States"}],[{"value":"RosiePocketon"},{"value":"en"},{"value":"Greece"}],[{"value":"RosiePocketon"},{"value":"en"},{"value":"Greece"}],[{"value":"RosiePocketon"},{"value":"en"},{"value":"Greece"}],[{"value":"AndiCartwright"},{"value":"en"},{"value":"United Kingdom"}],[{"value":"glitteringlatte"},{"value":"en"},{"value":"United States"}],[{"value":"glitteringlatte"},{"value":"en"},{"value":"United States"}],[{"value":"jorgefsb"},{"value":"en"},{"value":"United States"}],[{"value":"glitteringlatte"},{"value":"en"},{"value":"United States"}],[{"value":"jorgefsb"},{"value":"en"},{"value":"United States"}],[{"value":"jorgefsb"},{"value":"en"},{"value":"United States"}],[{"value":"sonuyadavsy172"},{"value":"en"},{"value":"India"}],[{"value":"momoneyxox"},{"value":"en"},{"value":"United States"}],[{"value":"MiguelGonzalez"},{"value":"en"},{"value":"España"}],[{"value":"momoneyxox"},{"value":"en"},{"value":"United States"}],[{"value":"MiguelGonzalez"},{"value":"en"},{"value":"España"}],[{"value":"Matthewprince_"},{"value":"en"},{"value":"United States"}],[{"value":"momoneyxox"},{"value":"en"},{"value":"United States"}],[{"value":"MiguelGonzalez"},{"value":"en"},{"value":"España"}],[{"value":"Matthewprince_"},{"value":"en"},{"value":"United States"}],[{"value":"Matthewprince_"},{"value":"en"},{"value":"United States"}],[{"value":"_MADEINGEORGIA_"},{"value":"en"},{"value":"United States"}],[{"value":"gcje24"},{"value":"en"},{"value":"Österreich"}],[{"value":"gcje24"},{"value":"en"},{"value":"Österreich"}],[{"value":"gcje24"},{"value":"en"},{"value":"Österreich"}],[{"value":"OuterRimToys"},{"value":"en"},{"value":"United States"}],[{"value":"OuterRimToys"},{"value":"en"},{"value":"United States"}],[{"value":"fvmbo"},{"value":"en"},{"value":"United States"}],[{"value":"fvmbo"},{"value":"en"},{"value":"United States"}],[{"value":"fvmbo"},{"value":"en"},{"value":"United States"}],[{"value":"alex9876smith1"},{"value":"en"},{"value":"United States"}],[{"value":"gilbert_3998"},{"value":"en"},{"value":"United States"}],[{"value":"theten_110TN"},{"value":"en"},{"value":"Indonesia"}],[{"value":"gilbert_3998"},{"value":"en"},{"value":"United States"}],[{"value":"theten_110TN"},{"value":"en"},{"value":"Indonesia"}],[{"value":"mitchell_lierz"},{"value":"en"},{"value":"United States"}],[{"value":"Lstands4lovely"},{"value":"en"},{"value":"United States"}],[{"value":"theten_110TN"},{"value":"en"},{"value":"Indonesia"}],[{"value":"mitchell_lierz"},{"value":"en"},{"value":"United States"}],[{"value":"Lstands4lovely"},{"value":"en"},{"value":"United States"}],[{"value":"mitchell_lierz"},{"value":"en"},{"value":"United States"}],[{"value":"Lstands4lovely"},{"value":"en"},{"value":"United States"}],[{"value":"HoodRich_DB"},{"value":"en"},{"value":"United States"}],[{"value":"HoodRich_DB"},{"value":"en"},{"value":"United States"}],[{"value":"AbidalHot"},{"value":"en"},{"value":"Nigeria"}],[{"value":"HoodRich_DB"},{"value":"en"},{"value":"United States"}],[{"value":"AbidalHot"},{"value":"en"},{"value":"Nigeria"}]],"columnNames":[{"name":"screenName","index":0,"aggr":"sum"},{"name":"lang","index":1,"aggr":"sum"},{"name":"country","index":2,"aggr":"sum"}],"rows":[["sonuyadavsy172","en","India"],["sonuyadavsy172","en","India"],["PabloFlexx","en","United States"],["PabloFlexx","en","United States"],["AjPuente_12","en","United States"],["PabloFlexx","en","United States"],["AjPuente_12","en","United States"],["AndiCartwright","en","United Kingdom"],["AndiCartwright","en","United Kingdom"],["FarebiAankhein","en","India"],["FarebiAankhein","en","India"],["BangBangClub23","en","United States"],["FarebiAankhein","en","India"],["BangBangClub23","en","United States"],["BusinessCork","en","Ireland"],["BusinessCork","en","Ireland"],["BusinessCork","en","Ireland"],["AbidalHot","en","Nigeria"],["alex9876smith1","en","United States"],["alex9876smith1","en","United States"],["BobbyAlonso316","en","United States"],["BobbyAlonso316","en","United States"],["maliaikang","en","Indonesia"],["joshuabrand1","en","Isle of Man"],["_MADEINGEORGIA_","en","United States"],["_MADEINGEORGIA_","en","United States"],["MaryPat822","en","United States"],["MaryPat822","en","United States"],["MaryPat822","en","United States"],["missgrandma_36","en","Hong Kong"],["missgrandma_36","en","Hong Kong"],["missgrandma_36","en","Hong Kong"],["joshuabrand1","en","Isle of Man"],["joshuabrand1","en","Isle of Man"],["gilbert_3998","en","United States"],["AjPuente_12","en","United States"],["MannyDaGemini","en","United States"],["MannyDaGemini","en","United States"],["MannyDaGemini","en","United States"],["RosiePocketon","en","Greece"],["RosiePocketon","en","Greece"],["RosiePocketon","en","Greece"],["AndiCartwright","en","United Kingdom"],["glitteringlatte","en","United States"],["glitteringlatte","en","United States"],["jorgefsb","en","United States"],["glitteringlatte","en","United States"],["jorgefsb","en","United States"],["jorgefsb","en","United States"],["sonuyadavsy172","en","India"],["momoneyxox","en","United States"],["MiguelGonzalez","en","España"],["momoneyxox","en","United States"],["MiguelGonzalez","en","España"],["Matthewprince_","en","United States"],["momoneyxox","en","United States"],["MiguelGonzalez","en","España"],["Matthewprince_","en","United States"],["Matthewprince_","en","United States"],["_MADEINGEORGIA_","en","United States"],["gcje24","en","Österreich"],["gcje24","en","Österreich"],["gcje24","en","Österreich"],["OuterRimToys","en","United States"],["OuterRimToys","en","United States"],["fvmbo","en","United States"],["fvmbo","en","United States"],["fvmbo","en","United States"],["alex9876smith1","en","United States"],["gilbert_3998","en","United States"],["theten_110TN","en","Indonesia"],["gilbert_3998","en","United States"],["theten_110TN","en","Indonesia"],["mitchell_lierz","en","United States"],["Lstands4lovely","en","United States"],["theten_110TN","en","Indonesia"],["mitchell_lierz","en","United States"],["Lstands4lovely","en","United States"],["mitchell_lierz","en","United States"],["Lstands4lovely","en","United States"],["HoodRich_DB","en","United States"],["HoodRich_DB","en","United States"],["AbidalHot","en","Nigeria"],["HoodRich_DB","en","United States"],["AbidalHot","en","Nigeria"]]},"dateCreated":"2016-12-17T10:47:40+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2491"},{"text":"","dateUpdated":"2016-12-17T10:47:40+0100","config":{"tableHide":false,"colWidth":12,"editorMode":"ace/mode/scala","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{},"map":{"baseMapType":"Streets","isOnline":true,"pinCols":[]}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1481968060573_-75938581","id":"20150423-123018_860235597","result":{"code":"SUCCESS","type":"TEXT","msg":""},"dateCreated":"2016-12-17T10:47:40+0100","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2492"}],"name":"07.4.1. A Dashboard Example","id":"2C45H7RPK","angularObjects":{"2BXV59BJ5:shared_process":[],"2BZ7JWBYX:shared_process":[],"2BYKQAFE3:shared_process":[],"2BXX92DZZ:shared_process":[],"2BY8191PX:shared_process":[],"2C242HAW7:shared_process":[],"2BXRBYBNN:shared_process":[],"2C1F64B57:shared_process":[],"2BXESURSJ:shared_process":[],"2BZSUGKDS:shared_process":[],"2C26Y211G:shared_process":[],"2C1URPXW3:shared_process":[],"2BZN774H8:shared_process":[]},"config":{"looknfeel":"default"},"info":{}}